const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MobileApp-Dbji-1fD.js","assets/vendor-react-CyvzqkFf.js","assets/router-CSFsjDW6.js","assets/DesktopApp-BsFSZEIF.js","assets/createLucideIcon-D_xG-gSw.js","assets/settings-DkAwU-7b.js","assets/DesktopApp-CHWIiy8R.css"])))=>i.map(i=>d[i]);
import{r as e,a as t,b as n}from"./vendor-react-CyvzqkFf.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var r={exports:{}},o={},i=e,s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,n){var r,o={},i=null,a=null;for(r in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(a=t.ref),t)c.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:s,type:e,key:i,ref:a,props:o,_owner:l.current}}o.Fragment=a,o.jsx=d,o.jsxs=d,r.exports=o;var f,p=r.exports,h=t;f=h.createRoot,h.hydrateRoot;const m={},y=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in m)return;m[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script"),o.crossOrigin="",o.href=e,n&&o.setAttribute("nonce",n),document.head.appendChild(o),t?new Promise((t,n)=>{o.addEventListener("load",t),o.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)})};const g=e.createContext({theme:"light",toggle:()=>{}});function v({children:t}){const[n,r]=e.useState(()=>"dark"===localStorage.getItem("theme")?"dark":"light");e.useEffect(()=>{document.documentElement.setAttribute("data-theme",n),localStorage.setItem("theme",n)},[n]);const o=e.useMemo(()=>({theme:n,toggle:()=>r(e=>"dark"===e?"light":"dark")}),[n]);return p.jsx(g.Provider,{value:o,children:t})}function w(){return e.useContext(g)}function b(){try{const e="uid";let t=localStorage.getItem(e);return t||(t="u_"+Math.random().toString(36).slice(2)+Date.now().toString(36),localStorage.setItem(e,t),document.cookie=`uid=${t}; path=/; max-age=604800`),t}catch{return"u_"+Math.random().toString(36).slice(2)}}function S(e,t){try{return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch(()=>{})}catch{return Promise.resolve()}}function _(){try{return(new Date).toISOString()}catch{return null}}async function E(){try{if(!("serviceWorker"in navigator))return null;const e=await navigator.serviceWorker.ready;if(!e||!("pushManager"in e))return null;let t=await e.pushManager.getSubscription();if(!t){const n=await fetch("/api/push/public-key");if(!n.ok)return null;const{key:r}=await n.json();t=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:O(r)})}const n=b();return await S("/api/push/subscribe",{uid:n,subscription:t}),t}catch{return null}}async function k(e,t){try{404===(await fetch("/api/push/ping",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:e,...t})})).status&&(await E(),await fetch("/api/push/ping",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:e,...t})}))}catch{}}function O(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}function I(){let e=null,t=null,n=null,r=null,o=0;function i(){try{return"visible"===document.visibilityState}catch{return!0}}function s(){try{n&&clearInterval(n)}catch{}null!=r&&i()&&(o+=Date.now()-r,r=null),S("/api/analytics/session/end",{uid:e,sessionId:t,clientTs:_(),visibleMs:o})}try{document.addEventListener("visibilitychange",function(){i()?r=Date.now():null!=r&&(o+=Date.now()-r,r=null)}),window.addEventListener("beforeunload",s),async function(){e=b(),t="s_"+Math.random().toString(36).slice(2)+Date.now().toString(36);try{sessionStorage.setItem("sid",t)}catch{}const s=Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC",a=navigator.userAgent||"";S("/api/analytics/identify",{uid:e,tz:s,ua:a,clientTs:_()}),S("/api/analytics/session/start",{uid:e,sessionId:t,tz:s,ua:a,clientTs:_()}),r=Date.now(),setTimeout(()=>{n=setInterval(()=>{let n=o;null!=r&&i()&&(n+=Date.now()-r),S("/api/analytics/session/heartbeat",{uid:e,sessionId:t,clientTs:_(),visibleMs:n})},15e3)},5e3)}()}catch{}return{get uid(){return e},get sessionId(){return t},end:s}}const j=e.lazy(()=>y(()=>import("./MobileApp-Dbji-1fD.js"),__vite__mapDeps([0,1,2]))),T=e.lazy(()=>y(()=>import("./DesktopApp-BsFSZEIF.js"),__vite__mapDeps([3,1,2,4,5,6])));function P(){const{isMobile:t}=function(){const[t,n]=e.useState(()=>"undefined"==typeof window||window.innerWidth<768);return e.useEffect(()=>{function e(){n(window.innerWidth<768)}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),{isMobile:t}}();return e.useEffect(()=>{const e=()=>{const e=I();try{"undefined"!=typeof Notification&&"granted"===Notification.permission&&E()}catch{}return()=>{var t;return null==(t=null==e?void 0:e.end)?void 0:t.call(e)}};let t=null;const n=setTimeout(()=>{"requestIdleCallback"in window?requestIdleCallback(()=>{t=e()}):t=e()},2e3);return()=>{clearTimeout(n),null==t||t()}},[]),p.jsx(v,{children:p.jsx(e.Suspense,{fallback:p.jsx("div",{style:{padding:16},children:"Loadingâ€¦"}),children:t?p.jsx(j,{}):p.jsx(T,{})})})}f(document.getElementById("root")).render(p.jsx(n.StrictMode,{children:p.jsx(P,{})})),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{})});export{y as _,b as g,p as j,k as p,E as s,w as u};
