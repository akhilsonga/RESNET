import{j as e}from"./index-o4lGSIZO.js";import{b as s}from"./vendor-react-CyvzqkFf.js";function t(){const[t,a]=s.useState(""),[r,d]=s.useState(""),[i,l]=s.useState(!1),[n,o]=s.useState(!1),[c,u]=s.useState(""),[h,m]=s.useState([]),p=e=>{e.preventDefault(),u(""),"akhilsonga"===t&&"Akhilsonga@1"===r?l(!0):u("Invalid credentials")};return s.useEffect(()=>{i&&(o(!0),(async()=>{try{const e=await fetch("/api/admin/users/emails",{cache:"no-store"});if(!e.ok)throw new Error("Failed to load users");const s=await e.json();if(s&&s.ok&&Array.isArray(s.users)){const e=new Set,t=[];for(const a of s.users){const s=(null==a?void 0:a.email)||"";s&&(e.has(s)||(e.add(s),t.push(a)))}m(t)}else m([])}catch(e){u("Could not fetch users")}finally{o(!1)}})())},[i]),i?e.jsxs("div",{style:{padding:16},children:[e.jsx("h2",{style:{margin:0},children:"Admin"}),e.jsxs("div",{className:"text-muted",style:{marginTop:6},children:["Unique users: ",h.length]}),e.jsxs("div",{style:{marginTop:12},children:[n&&e.jsx("div",{className:"text-muted",children:"Loadingâ€¦"}),!n&&0===h.length&&e.jsx("div",{className:"text-muted",children:"No users"}),!n&&h.length>0&&e.jsx("ul",{style:{padding:0,listStyle:"none",display:"grid",gap:8},children:h.map((s,t)=>e.jsxs("li",{style:{border:"1px solid var(--border)",borderRadius:12,padding:12},children:[e.jsx("div",{style:{fontWeight:700},children:s.name||"(no name)"}),e.jsx("div",{className:"text-muted",style:{wordBreak:"break-all"},children:s.email})]},t))})]})]}):e.jsxs("div",{style:{padding:16},children:[e.jsx("h2",{style:{margin:0,marginBottom:12},children:"Admin Login"}),e.jsx("form",{onSubmit:p,children:e.jsxs("div",{style:{display:"grid",gap:8,maxWidth:360},children:[e.jsx("input",{type:"text",placeholder:"Username",value:t,onChange:e=>a(e.target.value),autoComplete:"username",style:{padding:10,borderRadius:10,border:"1px solid var(--border)"}}),e.jsx("input",{type:"password",placeholder:"Password",value:r,onChange:e=>d(e.target.value),autoComplete:"current-password",style:{padding:10,borderRadius:10,border:"1px solid var(--border)"}}),c&&e.jsx("div",{className:"text-muted",role:"alert",style:{color:"var(--danger, #dc2626)"},children:c}),e.jsx("button",{type:"submit",className:"chip",style:{padding:"10px 12px",borderRadius:12,border:"1px solid var(--border)",width:140},children:"Login"})]})})]})}export{t as default};
